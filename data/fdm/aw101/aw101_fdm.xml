<?xml version="1.0" encoding="UTF-8"?>
<fdm>
  
  <!-- AW101 Flight Dynamics Model Data File -->
  
  <!-- collision points -->
  <collision_points>
    
    <collision_point>   6.56  0.0   0.00 </collision_point> <!-- [m] nose -->
    <collision_point> -11.69  0.0  -0.88 </collision_point> <!-- [m] tail -->
    <collision_point>   9.30  0.0  -3.12 </collision_point> <!-- [m] main rotor N -->
    <collision_point>   0.0   9.30 -3.58 </collision_point> <!-- [m] main rotor E -->
    <collision_point>  -9.30  0.0  -4.04 </collision_point> <!-- [m] main rotor S -->
    <collision_point>   0.0  -9.30 -3.58 </collision_point> <!-- [m] main rotor W -->
    
  </collision_points>
  
  <!-- limitations -->
  <limitations>
    
    <airspeed_max unit="kts" factor="1.5"> 167.0 </airspeed_max>  <!-- [m/s] maximum airspeed (exceeding this value causes crash) -->
    
    <load_aero_min factor="1.5"> -1.8 </load_aero_min>  <!-- [-] minimum (maximum negative) load factor due to aerodynamics (exceeding this value causes crash) -->
    <load_aero_max factor="1.5">  3.0 </load_aero_max>  <!-- [-] maximum (maximum positive) load factor due to aerodynamics (exceeding this value causes crash) -->
    <load_gear_max factor="1.5">  9.0 </load_gear_max>  <!-- [-] maximum absolute load factor due to landing gear (exceeding this value causes crash) -->
    
  </limitations>
  
  <!-- pilot position -->
  <pilot_position> 4.4 -0.7 -1.5 </pilot_position> <!-- [m] pilot position expressed in BAS -->
  
  <!-- aerodynamics -->
  <aerodynamics>
    
    <!-- main rotor -->
    <main_rotor counter-clockwise="1">
      <hub_center> 0.0 0.0 -3.58 </hub_center>        <!-- [m] rotor hub coordinates -->
      <inclination unit="deg"> 3.0 </inclination>     <!-- [rad] rotor inclination angle (positive if forward) -->
      <number_of_blades> 5 </number_of_blades>        <!-- number of blades -->
      <blade_mass> 130.0 </blade_mass>                <!-- [kg] single blade mass -->
      <rotor_radius> 9.30 </rotor_radius>             <!-- [m] rotor radius -->
      <blade_chord> 0.47 </blade_chord>               <!-- [m] blade chord -->
      <hinge_offset> 0.50 </hinge_offset>             <!-- [m] flapping hinge offset -->
      <lift_slope> 5.73 </lift_slope>                 <!-- [1/rad] blade section lift curve slope -->
      <tip_losses> 0.97 </tip_losses>                 <!-- [-] tip losses coefficient -->
      <delta_0> 0.001 </delta_0>                      <!-- [-] drag coefficient constant component -->
      <delta_2> 0.001 </delta_2>                      <!-- [-] drag coefficient quadratic component -->
      <beta_max unit="deg"> 20.0 </beta_max>          <!-- [rad] maximum flapping angle -->
    </main_rotor>
    
    <!-- tail rotor -->
    <tail_rotor>
      <hub_center> -11.50 -1.10 -3.34 </hub_center>   <!-- [m] rotor hub coordinates -->
      <cant_angle unit="deg"> 90.0 </cant_angle>      <!-- [rad] cant angle -->
      <number_of_blades> 4 </number_of_blades>        <!-- number of blades -->
      <blade_mass> 7.0 </blade_mass>                  <!-- [kg] single blade mass -->
      <rotor_radius> 2.00 </rotor_radius>             <!-- [m] rotor radius -->
      <blade_chord> 0.34 </blade_chord>               <!-- [m] blade chord -->
      <lift_slope> 5.73 </lift_slope>                 <!-- [1/rad] blade section lift curve slope -->
      <tip_losses> 0.92 </tip_losses>                 <!-- [-] tip losses coefficient -->
      <delta_0> 0.001 </delta_0>                      <!-- [-] drag coefficient constant component -->
      <delta_2> 0.001 </delta_2>                      <!-- [-] drag coefficient quadratic component -->
    </tail_rotor>

    <!-- fuselage -->
    <fuselage>
      <aero_center> 0.0 0.0 0.0 </aero_center>
      
      <length> 19.30 </length>  <!-- [m] fuselage reference length -->
      <width>   4.34 </width>   <!-- [m] fuselage reference width -->
      <area>    9.24 </area>    <!-- [m^2] fuselage reference area -->
      
      <!-- [-] drag coefficient vs [rad] angle of attack -->
      <cx keys_unit="deg">
        -180.0     0.1292
        -151.0     0.6543
        -120.0     2.0203
         -90.0     2.8429
         -60.0     2.0385
         -30.0     0.6131
         -20.0     0.2851
         -10.0     0.1464
          -5.0     0.1285
           0.0     0.1291
           5.0     0.1567
          10.0     0.2042
          20.0     0.4282
          31.0     0.7510
          60.0     2.7399
          90.0     3.7147
         120.0     2.3915
         150.0     0.6606
         180.0     0.1292
      </cx>
      
      <!-- [-] lift coefficient vs [rad] angle of attack -->
      <cz>
        -180.0    -0.124
        -151.0     0.643
        -120.0     0.681
         -90.0    -0.329
         -60.0    -1.371
         -30.0    -0.954
         -20.0    -0.580
         -10.0    -0.209
          -5.0    -0.024
           0.0     0.123
           5.0     0.336
          10.0     0.525
          20.0     1.012
          31.0     1.432
          60.0     1.937
          90.0     0.573
         120.0    -1.516
         150.0    -0.992
         180.0    -0.124
      </cz>
      
      <!-- [-] pitching moment coefficient vs [rad] angle of attack -->
      <cm>
        -180.0    -0.154
        -151.0     1.414
        -120.0     1.864
         -90.0     0.566
         -60.0    -0.295
         -30.0    -0.744
         -20.0    -0.747
         -10.0    -0.557
          -5.0    -0.438
           0.0    -0.248
           5.0    -0.142
          10.0    -0.020
          20.0     0.069
          31.0     0.199
          60.0     0.013
          90.0    -1.190
         120.0    -2.450
         150.0    -1.663
         180.0    -0.154
      </cm>
      
    </fuselage>

    <!-- horizontal stabilizer -->
    <stab_hor>
        
      <aero_center> -11.0 1.2 0.92 </aero_center>      <!-- [m] stabilizer aerodynamic center expressed in BAS -->
      
      <area> 2.87 </area>                              <!-- [m^2] stabilizer area -->
      
      <!-- [-] drag coefficient vs [rad] angle of attack -->
      <cx keys_unit="deg">
        -180.0     0.010
        -150.0     0.430
        -120.0     0.888
         -90.0     1.200
         -80.0     1.161
         -70.0     1.050
         -60.0     0.888
         -50.0     0.702
         -40.0     0.531
         -30.0     0.430
         -25.0     0.370
         -20.0     0.360
         -15.0     0.190
         -10.0     0.040
          -5.0     0.022
           0.0     0.010
           5.0     0.022
          10.0     0.040
          15.0     0.190
          20.0     0.360
          25.0     0.370
          30.0     0.430
          40.0     0.531
          50.0     0.702
          60.0     0.888
          70.0     1.050
          80.0     1.161
          90.0     1.200
         120.0     0.888
         150.0     0.430
         180.0     0.010
      </cx>
        
      <!-- [-] lift coefficient vs [rad] angle of attack -->
      <cz keys_unit="deg">
        -180.0     0.000
        -150.0     0.745
        -120.0     0.757
         -90.0     0.000
         -80.0    -0.294
         -70.0    -0.558
         -60.0    -0.745
         -50.0    -0.847
         -40.0    -0.847
         -30.0    -0.745
         -25.0    -0.795
         -20.0    -0.950
         -15.0    -1.030
         -10.0    -0.710
          -5.0    -0.356
           0.0     0.000
           5.0     0.356
          10.0     0.710
          15.0     1.030
          20.0     0.950
          25.0     0.795
          30.0     0.745
          40.0     0.847
          50.0     0.847
          60.0     0.745
          70.0     0.558
          80.0     0.294
          90.0     0.000
         120.0    -0.757
         150.0    -0.745
         180.0     0.000
      </cz>
        
    </stab_hor>
    
    <!-- vertical stabilizer -->
    <stab_ver>
        
      <aero_center> -11.1 0.0 -2.4  </aero_center>   <!-- [m] stabilizer aerodynamic center expressed in BAS -->
      
      <area> 4.9 </area>                             <!-- [m^2] stabilizer area -->
      
      <!-- [-] drag coefficient vs [rad] sideslip angle -->
      <cx keys_unit="deg">
         -90.0     1.080
         -80.0     1.020
         -70.0     0.966
         -60.0     0.875
         -50.0     0.750
         -40.0     0.580
         -30.0     0.355
         -25.0     0.248
         -20.0     0.162
         -15.0     0.092
         -10.0     0.044
          -5.0     0.021
           0.0     0.018
           5.0     0.033
          10.0     0.066
          15.0     0.118
          20.0     0.174
          25.0     0.265
          30.0     0.360
          40.0     0.575
          50.0     0.745
          60.0     0.875
          70.0     0.965
          80.0     1.025
          90.0     1.100
      </cx>
      
      <!-- [-] side force coefficient vs [rad] sideslip angle -->
      <cy keys_unit="deg">
         -90.0     0.000
         -90.0     0.000
         -80.0     0.170
         -70.0     0.320
         -60.0     0.480
         -50.0     0.630
         -40.0     0.800
         -30.0     0.890
         -25.0     0.890
         -20.0     0.820
         -15.0     0.610
         -10.0     0.380
          -5.0     0.160
           0.0    -0.060
           5.0    -0.280
          10.0    -0.500
          15.0    -0.730
          20.0    -0.930
          25.0    -1.000
          30.0    -1.000
          40.0    -0.880
          50.0    -0.660
          60.0    -0.460
          70.0    -0.280
          80.0    -0.120
          90.0     0.000
      </cy>
        
    </stab_ver>
    
  </aerodynamics>
  
  <!-- controls -->
  <controls>
    
    <!-- [rad] lateral cyclic pitch vs [-] normalized roll input -->
    <control_channel name="cyclic_lat" unit="deg">
      -1.0    8.0
       0.0   -4.0
       1.0  -16.0
    </control_channel>
    
    <!-- [rad] longitudinal cyclic pitch vs [-] normalized pitch input -->
    <control_channel name="cyclic_lon" unit="deg">
      -1.0   15.0
       1.0  -15.0
    </control_channel>
    
    <!-- [rad] collective pitch vs [-] normalized collective input -->
    <control_channel name="collective" input="input.controls.collective" unit="deg">
       0.0    7.0
       1.0   22.0
    </control_channel>
    
    <!-- [rad] tail collective pitch vs [-] normalized yaw input -->
    <control_channel name="tail_pitch" unit="deg">
      -1.0    0.0
       0.0   14.0
       1.0   28.0
    </control_channel>
    
    <!-- [-] normalized left brake force vs [-] normalized left brake input -->
    <control_channel name="brake_left" input="input.controls.brake_left">
       0.0    0.0
       1.0    1.0
    </control_channel>
    
    <!-- [-] normalized right brake force vs [-] normalized right brake input -->
    <control_channel name="brake_right" input="input.controls.brake_right">
       0.0    0.0
       1.0    1.0
    </control_channel>
    
    <!-- AFCS -->
    <afcs>
      
      <sas_roll>
        <pid>
          <kp> 5.0 </kp>
          <ki> 0.0 </ki>
          <kd> 0.0 </kd>
          
          <min> -0.1 </min>
          <max>  0.1 </max>
        </pid>
      </sas_roll>
      
      <sas_pitch>
        <pid>
          <kp> 5.0 </kp>
          <ki> 0.0 </ki>
          <kd> 0.0 </kd>
          
          <min> -0.1 </min>
          <max>  0.1 </max>
        </pid>
      </sas_pitch>
      
      <sas_yaw>
        <pid>
          <kp> 2.0 </kp>
          <ki> 0.0 </ki>
          <kd> 0.0 </kd>
          
          <min> -0.1 </min>
          <max>  0.1 </max>
        </pid>
      </sas_yaw>
      
      <collective>
        <pid>
          <kp> 2.0 </kp>
          <ki> 0.0 </ki>
          <kd> 0.0 </kd>
          
          <min> -0.03 </min>
          <max>  0.03 </max>
        </pid>
      </collective>
      
    </afcs>
    
  </controls>
  
  <!-- landing gear -->
  <landing_gear>
    
    <!-- nose wheel -->
    <wheel name="wheel_n" steerable="0" caster="1" brake_group="0" input="input.controls.landing_gear">
      <attachment_point>   5.00   0.0  0.0   </attachment_point>    <!-- [m] strut attachment point coordinates expressed in BAS -->
      <unloaded_wheel>     5.00   0.0  1.30  </unloaded_wheel>      <!-- [m] unloaded wheel coordinates expressed in BAS -->
      
      <stiffness>  1.6e+5  </stiffness>                             <!-- [N/m] strut stiffness (linear spring) coefficient -->
      <damping>    1.6e+4  </damping>                               <!-- [N/(m/s)] strut damping coefficient -->
      
      <friction_static>   0.95  </friction_static>                  <!-- [-] coefficient of static friction -->
      <friction_kinetic>  0.75  </friction_kinetic>                 <!-- [-] coefficient of kinetic friction -->
      <friction_rolling>  0.02  </friction_rolling>                 <!-- [-] coefficient of rolling friction -->
      
      <d_max> 0.2 </d_max>                                          <!-- [m] maximum distance for static friction spring like model -->
      <v_max> 0.5 </v_max>                                          <!-- [m/s] maximum velocity for continuous friction model -->
    </wheel>
    
    <!-- left wheel -->
    <wheel name="wheel_l" steerable="0" caster="0" brake_group="1" input="input.controls.landing_gear">
      <attachment_point>  -1.98  -2.3  0.0   </attachment_point>    <!-- [m] strut attachment point coordinates expressed in BAS -->
      <unloaded_wheel>    -1.98  -2.3  1.30  </unloaded_wheel>      <!-- [m] unloaded wheel coordinates expressed in BAS -->
      
      <stiffness>  5.0e+5  </stiffness>                             <!-- [N/m] strut stiffness (linear spring) coefficient -->
      <damping>    2.0e+4  </damping>                               <!-- [N/(m/s)] strut damping coefficient -->
      
      <friction_static>   0.95  </friction_static>                  <!-- [-] coefficient of static friction -->
      <friction_kinetic>  0.75  </friction_kinetic>                 <!-- [-] coefficient of kinetic friction -->
      <friction_rolling>  0.02  </friction_rolling>                 <!-- [-] coefficient of rolling friction -->
      
      <d_max> 0.2 </d_max>                                          <!-- [m] maximum distance for static friction spring like model -->
      <v_max> 0.5 </v_max>                                          <!-- [m/s] maximum velocity for continuous friction model -->
    </wheel>
    
    <!-- right wheel -->
    <wheel name="wheel_r" steerable="0" caster="0" brake_group="2" input="input.controls.landing_gear">
      <attachment_point>  -1.98   2.3  0.0   </attachment_point>    <!-- [m] strut attachment point coordinates expressed in BAS -->
      <unloaded_wheel>    -1.98   2.3  1.30  </unloaded_wheel>      <!-- [m] unloaded wheel coordinates expressed in BAS -->
      
      <stiffness>  5.0e+5  </stiffness>                             <!-- [N/m] strut stiffness (linear spring) coefficient -->
      <damping>    2.0e+4  </damping>                               <!-- [N/(m/s)] strut damping coefficient -->
      
      <friction_static>   0.95  </friction_static>                  <!-- [-] coefficient of static friction -->
      <friction_kinetic>  0.75  </friction_kinetic>                 <!-- [-] coefficient of kinetic friction -->
      <friction_rolling>  0.02  </friction_rolling>                 <!-- [-] coefficient of rolling friction -->
      
      <d_max> 0.2 </d_max>                                          <!-- [m] maximum distance for static friction spring like model -->
      <v_max> 0.5 </v_max>                                          <!-- [m/s] maximum velocity for continuous friction model -->
    </wheel>
    
  </landing_gear>
  
  <!-- mass -->
  <mass>
    
    <empty_mass> 10500.0 </empty_mass> <!-- [kg] empty aircraft mass -->
    
    <!-- [kg*m^2] empty aircraft inertia tensor -->
    <inertia_tensor>
     12000.0       0.0   -6000.0
         0.0   80000.0       0.0
     -6000.0       0.0   80000.0
    </inertia_tensor>
    
    <center_of_mass>  0.0  0.0  0.0  </center_of_mass>  <!-- [m] empty aircraft center of mass coordinates expressed in BAS -->
    
     <!-- left pilot -->
    <variable_mass name="pilot_l" input="input.masses.pilot_1">
      <mass_max> 120.0 </mass_max>                      <!-- [kg] maximum mass -->
      <coordinates>  4.4 -0.7 -1.0 </coordinates>       <!-- [m] coordinates expressed in BAS -->
    </variable_mass>
    
    <!-- right pilot -->
    <variable_mass name="pilot_r" input="input.masses.pilot_2">
      <mass_max> 120.0 </mass_max>                      <!-- [kg] maximum mass -->
      <coordinates>  4.4  0.7 -1.0 </coordinates>       <!-- [m] coordinates expressed in BAS -->
    </variable_mass>
    
    <!-- fuel tank -->
    <variable_mass name="fuel_tank" input="input.masses.tank_1">
      <mass_max>  3406.0 </mass_max>                    <!-- [kg] maximum mass -->
      <coordinates>  0.0   0.0  0.0 </coordinates>      <!-- [m] coordinates expressed in BAS -->
    </variable_mass>
    
    <!-- cabin_load -->
    <variable_mass name="cabin" input="input.masses.cabin">
      <mass_max> 2000.0 </mass_max>                     <!-- [kg] maximum mass -->
      <coordinates>  0.0  0.0  0.0 </coordinates>       <!-- [m] coordinates expressed in BAS -->
    </variable_mass>
    
  </mass>
  
  <!-- propulsion -->
  <propulsion>

    <!-- TODO -->
    
  </propulsion>
  
</fdm>
